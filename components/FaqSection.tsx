// components/FaqSection.tsx

"use client"

import React, { useState, memo, PropsWithChildren } from "react" // ✅ اصلاحیه اعمال شد
import { motion, AnimatePresence } from "framer-motion"
import { FiPlus, FiMinus } from "react-icons/fi"
import { cn } from "@/lib/utils"

// داده‌های پرسش و پاسخ (گسترش‌یافته به ۲۰ سوال)
const faqData = [
  // بخش عمومی و معرفی
  {
    question: "۱. Rhyno AI چیست و چه خدماتی ارائه می‌دهد؟",
    answer:
      "Rhyno AI یک پلتفرم پیشرفته هوش مصنوعی است که دسترسی به مجموعه‌ای از بهترین مدل‌های AI جهان را برای تولید محتوا، کدنویسی، تبدیل متن به صدا، ساخت تصویر و تحلیل داده فراهم می‌کند. هدف ما ارائه ابزاری قدرتمند و در عین حال ساده برای افزایش خلاقیت و بهره‌وری شماست."
  },
  {
    question: "۲. چه چیزی Rhyno AI را از سایر پلتفرم‌ها متمایز می‌کند؟",
    answer:
      "سه مزیت کلیدی ما عبارتند از: ۱) دسترسی یکپارچه به چندین مدل پیشرو AI در یکجا، ۲) رابط کاربری ساده و بهینه‌شده برای زبان فارسی، و ۳) دسترسی پایدار و سریع برای کاربران داخل ایران بدون نیاز به ابزارهای جانبی."
  },
  {
    question: "۳. آیا برای استفاده از خدمات نیاز به ابزارهای تغییر IP دارم؟",
    answer:
      "خیر، یکی از مزیت‌های اصلی Rhyno AI، دسترسی آسان و بدون نیاز به ابزارهای جانبی برای کاربران داخل ایران است. شما می‌توانید با سرعت بالا و پایداری کامل از تمام خدمات ما استفاده کنید."
  },
  {
    question: "۴. آیا Rhyno AI از زبان فارسی پشتیبانی می‌کند؟",
    answer:
      "بله، پلتفرم ما به طور کامل برای زبان فارسی بهینه‌سازی شده است. شما می‌توانید درخواست‌های خود را به زبان فارسی وارد کنید و پاسخ‌های دقیق و باکیفیت دریافت نمایید. همچنین رابط کاربری سایت کاملا فارسی است."
  },
  // بخش حساب کاربری و پرداخت
  {
    question: "۵. آیا استفاده از Rhyno AI رایگان است؟",
    answer:
      "بله، شما می‌توانید به صورت رایگان ثبت‌نام کرده و از امکانات پایه پلتفرم برای تست و آشنایی با قابلیت‌ها استفاده کنید. برای دسترسی کامل و بدون محدودیت به تمام مدل‌ها، می‌توانید اشتراک تهیه کنید."
  },
  {
    question: "۶. نحوه قیمت‌گذاری و خرید اشتراک چگونه است؟",
    answer:
      "ما از مدل پرداخت به ازای مصرف (Pay-as-you-go) استفاده می‌کنیم. شما حساب خود را شارژ می‌کنید و تنها هزینه استفاده از مدل‌های مختلف از اعتبار شما کسر می‌شود. این روش به شما انعطاف‌پذیری کامل می‌دهد."
  },
  {
    question: "۷. چه روش‌های پرداختی پذیرفته می‌شود؟",
    answer:
      "شما می‌توانید به سادگی از طریق درگاه‌های پرداخت آنلاین امن و معتبر داخلی، حساب کاربری خود را شارژ نمایید."
  },
  {
    question: "۸. آیا امکان لغو اشتراک و بازگشت وجه وجود دارد؟",
    answer:
      "با توجه به مدل پرداخت به ازای مصرف، مفهومی به نام «اشتراک دوره‌ای» وجود ندارد. اعتبار شما در حساب کاربری باقی می‌ماند و منقضی نمی‌شود. در موارد خاص می‌توانید با پشتیبانی تماس بگیرید."
  },
  // بخش فنی و مدل‌ها
  {
    question: "۹. چه مدل‌های هوش مصنوعی در Rhyno AI پشتیبانی می‌شوند؟",
    answer:
      "ما از مدل‌های پیشرو در صنعت مانند سری GPT-5 و GPT-5 mini از OpenAI، مدل Gemini از Google، سری Claude 3 از Anthropic و مدل‌های تخصصی برای تولید تصویر (مانند DALL-E 3) و صدا پشتیبانی می‌کنیم. این لیست دائماً در حال به‌روزرسانی است."
  },
  {
    question: "۱۰. آیا امکان دسترسی به API برای توسعه‌دهندگان وجود دارد؟",
    answer:
      "بله، ما برای کاربران حرفه‌ای و کسب‌وکارها، API اختصاصی ارائه می‌دهیم تا بتوانند قدرت مدل‌های ما را مستقیماً در محصولات و سرویس‌های خود ادغام کنند. برای اطلاعات بیشتر به بخش مستندات مراجعه کنید."
  },
  {
    question: "۱۱. آیا می‌توانم فایل‌هایی مانند PDF یا CSV را تحلیل کنم؟",
    answer:
      "بله، مدل‌های پیشرفته ما قابلیت تحلیل اسناد متنی، استخراج داده از فایل‌های CSV و حتی تفسیر محتوای تصاویر را دارند. شما می‌توانید فایل خود را آپلود کرده و سوالاتتان را از هوش مصنوعی بپرسید."
  },
  {
    question: "۱۲. کیفیت تولید تصویر چگونه است؟",
    answer:
      "ما از جدیدترین مدل‌های تولید تصویر استفاده می‌کنیم که قادر به خلق تصاویر بسیار باکیفیت، خلاقانه و مطابق با دقیق‌ترین توصیفات شما هستند. این ابزار برای طراحان، بازاریابان و تولیدکنندگان محتوا ایده‌آل است."
  },
  {
    question: "۱۳. آیا داده‌های من امن هستند؟",
    answer:
      "ما به حریم خصوصی کاربران اهمیت ویژه‌ای می‌دهیم. داده‌های شما رمزنگاری شده و هرگز برای آموزش مدل‌های عمومی استفاده نمی‌شوند. برای اطلاعات کامل، لطفاً صفحه «سیاست حفظ حریم خصوصی» ما را مطالعه کنید."
  },
  // بخش کاربردی
  {
    question: "۱۴. Rhyno AI برای چه کسانی مناسب است؟",
    answer:
      "این پلتفرم برای طیف وسیعی از کاربران، از جمله نویسندگان، بازاریابان محتوا، برنامه‌نویسان، طراحان گرافیک، دانشجویان و مدیران کسب‌وکار که به دنبال بهینه‌سازی فرآیندها و افزایش خلاقیت خود هستند، مناسب است."
  },
  {
    question: "۱۵. چگونه می‌توانم تاریخچه مکالمات خود را مشاهده کنم؟",
    answer:
      "تمام مکالمات شما به صورت خودکار در حساب کاربری‌تان ذخیره می‌شود. شما می‌توانید از طریق داشبورد خود به راحتی به آن‌ها دسترسی داشته باشید، آن‌ها را دسته‌بندی کرده یا حذف نمایید."
  },
  {
    question: "۱۶. آیا امکان کار گروهی و تیمی در پلتفرم وجود دارد؟",
    answer:
      "در حال حاضر در حال توسعه ویژگی‌های کار تیمی هستیم. این قابلیت به زودی به پلتفرم اضافه خواهد شد تا تیم‌ها بتوانند به صورت مشترک از فضای کاری و اعتبار استفاده کنند."
  },
  {
    question: "۱۷. محدودیت تعداد کلمات ورودی و خروجی چقدر است؟",
    answer:
      "هر مدل هوش مصنوعی محدودیت خاص خود را برای طول متن ورودی (prompt) و خروجی (response) دارد که به آن «پنجره زمینه» یا Context Window می‌گویند. ما از مدل‌هایی با پنجره‌های زمینه بزرگ پشتیبانی می‌کنیم تا بتوانید کارهای پیچیده‌تری انجام دهید."
  },
  // بخش پشتیبانی
  {
    question: "۱۸. اگر با مشکلی مواجه شدم، چگونه می‌توانم پشتیبانی دریافت کنم؟",
    answer:
      "تیم پشتیبانی ما از طریق سیستم تیکتینگ در وب‌سایت و همچنین ایمیل، آماده پاسخگویی به سوالات و رفع مشکلات شما در سریع‌ترین زمان ممکن است."
  },
  {
    question:
      "۱۹. آیا مستندات یا راهنمای آموزشی برای استفاده بهتر از پلتفرم وجود دارد؟",
    answer:
      "بله، ما در بخش «بلاگ» و یک بخش «راهنما» در آینده، به طور مرتب مقالات و آموزش‌های کاربردی برای نوشتن پرامپت‌های بهتر و استفاده خلاقانه از هوش مصنوعی منتشر می‌کنیم."
  },
  {
    question:
      "۲۰. چگونه می‌توانم پیشنهادات یا بازخوردهای خود را با شما در میان بگذارم؟",
    answer:
      "ما همیشه از شنیدن نظرات کاربران خود استقبال می‌کنیم. شما می‌توانید از طریق صفحه «تماس با ما» یا ارسال ایمیل به بخش پشتیبانی، پیشنهادات خود را برای بهبود Rhyno AI با ما در میان بگذارید."
  }
]

// کامپوننت آیتم هر سوال
const FaqItem = ({
  item,
  isOpen,
  onClick
}: {
  item: { question: string; answer: string }
  isOpen: boolean
  onClick: () => void
}) => {
  return (
    <div className="border-b border-white/10 py-5 last:border-none">
      <button
        onClick={onClick}
        className="flex w-full items-center justify-between gap-4 text-right"
      >
        <span className="text-lg font-medium text-white">{item.question}</span>
        <div className="shrink-0 text-blue-400">
          {isOpen ? <FiMinus size={22} /> : <FiPlus size={22} />}
        </div>
      </button>
      <AnimatePresence>
        {isOpen && (
          <motion.div
            initial={{ opacity: 0, height: 0, marginTop: 0 }}
            animate={{ opacity: 1, height: "auto", marginTop: "16px" }}
            exit={{ opacity: 0, height: 0, marginTop: 0 }}
            transition={{ duration: 0.3, ease: "easeInOut" }}
            className="overflow-hidden"
          >
            <p className="leading-relaxed text-gray-400">{item.answer}</p>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  )
}

// کامپوننت اصلی بخش FAQ
const FaqSection = () => {
  const [openIndex, setOpenIndex] = useState<number | null>(0) // باز بودن سوال اول به صورت پیش‌فرض

  const handleClick = (index: number) => {
    setOpenIndex(openIndex === index ? null : index)
  }

  return (
    <section id="faq" className="py-16 md:py-24">
      <SectionTitle>سوالات متداول</SectionTitle>
      <motion.div
        initial={{ opacity: 0, y: 30 }}
        whileInView={{ opacity: 1, y: 0 }}
        viewport={{ once: true, amount: 0.3 }}
        transition={{ duration: 0.7 }}
        className="mx-auto max-w-4xl rounded-2xl border border-white/10 bg-black/20 p-6 backdrop-blur-sm md:p-8"
      >
        {faqData.map((item, index) => (
          <FaqItem
            key={index}
            item={item}
            isOpen={openIndex === index}
            onClick={() => handleClick(index)}
          />
        ))}
      </motion.div>
    </section>
  )
}

// کامپوننت عنوان بخش
const SectionTitle = memo(
  ({ children, className = "" }: PropsWithChildren<{ className?: string }>) => (
    <h2
      className={cn(
        "mb-12 text-center text-3xl font-bold text-white sm:text-4xl lg:text-5xl",
        className
      )}
    >
      {children}
    </h2>
  )
)
SectionTitle.displayName = "SectionTitle"

export default FaqSection
